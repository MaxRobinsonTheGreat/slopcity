<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursive Trees</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            overflow: hidden;
        }
        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #0f0;
            z-index: 10;
            max-width: 300px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #0f0;
        }
        input[type="range"] {
            width: 100%;
            cursor: pointer;
        }
        select, button {
            width: 100%;
            padding: 8px;
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }
        button:hover {
            background: #0f0;
            color: #000;
        }
        .value-display {
            display: inline-block;
            float: right;
            color: #0a0;
        }
        #nav {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #0f0;
        }
        #nav a {
            display: block;
            color: #0f0;
            text-decoration: none;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #0f0;
            border-radius: 5px;
            text-align: center;
            transition: all 0.3s;
        }
        #nav a:hover {
            background: #0f0;
            color: #000;
        }
    </style>
</head>
<body>
    <div id="container">
        <canvas id="canvas"></canvas>

        <div id="controls">
            <h3 style="margin-bottom: 15px; text-align: center;">RECURSIVE TREES</h3>

            <div class="control-group">
                <label>Depth <span class="value-display" id="depthValue">10</span></label>
                <input type="range" id="depth" min="3" max="15" value="10" step="1">
            </div>

            <div class="control-group">
                <label>Angle <span class="value-display" id="angleValue">25Â°</span></label>
                <input type="range" id="angle" min="10" max="60" value="25" step="1">
            </div>

            <div class="control-group">
                <label>Branch Ratio <span class="value-display" id="ratioValue">0.7</span></label>
                <input type="range" id="ratio" min="0.5" max="0.9" value="0.7" step="0.01">
            </div>

            <div class="control-group">
                <label>Width Factor <span class="value-display" id="widthValue">0.7</span></label>
                <input type="range" id="widthFactor" min="0.5" max="0.9" value="0.7" step="0.01">
            </div>

            <div class="control-group">
                <label>Style</label>
                <select id="style">
                    <option value="classic">Classic Tree</option>
                    <option value="symmetric">Symmetric</option>
                    <option value="wild">Wild Growth</option>
                    <option value="bamboo">Bamboo</option>
                    <option value="lightning">Lightning</option>
                </select>
            </div>

            <div class="control-group">
                <label>Color Scheme</label>
                <select id="colorScheme">
                    <option value="natural">Natural</option>
                    <option value="autumn">Autumn</option>
                    <option value="neon">Neon</option>
                    <option value="rainbow">Rainbow</option>
                    <option value="monochrome">Monochrome</option>
                </select>
            </div>

            <div class="control-group">
                <button id="animateBtn">Animate Growth</button>
            </div>

            <div class="control-group">
                <button id="randomBtn">Randomize</button>
            </div>
        </div>

        <div id="nav">
            <a href="index.html">Fractal Explorer</a>
            <a href="spiral.html">Spiral Patterns</a>
            <a href="subdivision.html">Subdivisions</a>
            <a href="../index.html">Main Hub</a>
        </div>
    </div>

    <script>
        console.log('ðŸŒ³ RECURSIVE TREE GENERATOR INITIALIZING...');

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const dpr = window.devicePixelRatio || 1;
        let width, height;

        let params = {
            depth: 10,
            angle: 25,
            ratio: 0.7,
            widthFactor: 0.7,
            style: 'classic',
            colorScheme: 'natural'
        };

        let animating = false;
        let animationDepth = 0;
        let animationFrame = null;

        function resizeCanvas() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';
            ctx.scale(dpr, dpr);
        }

        function getColor(depth, maxDepth, scheme) {
            const t = depth / maxDepth;

            switch(scheme) {
                case 'natural':
                    if (t < 0.7) {
                        return `hsl(30, ${70 - t * 40}%, ${30 - t * 10}%)`;
                    } else {
                        return `hsl(${120 + (t - 0.7) * 50}, 60%, ${30 + (t - 0.7) * 40}%)`;
                    }

                case 'autumn':
                    return `hsl(${30 - t * 30}, ${80 - t * 20}%, ${40 + t * 20}%)`;

                case 'neon':
                    return `hsl(${t * 360}, 100%, 50%)`;

                case 'rainbow':
                    return `hsl(${(1 - t) * 360}, 80%, 50%)`;

                case 'monochrome':
                    const v = Math.floor((1 - t) * 255);
                    return `rgb(${v}, ${v}, ${v})`;

                default:
                    return '#0f0';
            }
        }

        function drawBranch(x, y, length, angle, depth, maxDepth, lineWidth) {
            if (depth === 0 || length < 2) return;
            if (animating && depth > animationDepth) return;

            const endX = x + length * Math.cos(angle);
            const endY = y - length * Math.sin(angle);

            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(endX, endY);
            ctx.strokeStyle = getColor(depth, maxDepth, params.colorScheme);
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';
            ctx.stroke();

            const newLength = length * params.ratio;
            const newWidth = lineWidth * params.widthFactor;

            let branches = [];

            switch(params.style) {
                case 'classic':
                    branches = [
                        { angle: angle + params.angle * Math.PI / 180, offset: 0 },
                        { angle: angle - params.angle * Math.PI / 180, offset: 0 }
                    ];
                    break;

                case 'symmetric':
                    branches = [
                        { angle: angle + params.angle * Math.PI / 180, offset: 0 },
                        { angle: angle, offset: 0 },
                        { angle: angle - params.angle * Math.PI / 180, offset: 0 }
                    ];
                    break;

                case 'wild':
                    const randomAngle1 = params.angle + (Math.random() - 0.5) * 20;
                    const randomAngle2 = params.angle + (Math.random() - 0.5) * 20;
                    branches = [
                        { angle: angle + randomAngle1 * Math.PI / 180, offset: 0 },
                        { angle: angle - randomAngle2 * Math.PI / 180, offset: 0 }
                    ];
                    break;

                case 'bamboo':
                    branches = [
                        { angle: angle + params.angle * Math.PI / 180 * 0.3, offset: 0 },
                        { angle: angle - params.angle * Math.PI / 180 * 0.3, offset: 0 }
                    ];
                    break;

                case 'lightning':
                    const zigzag = (Math.random() - 0.5) * params.angle * 2;
                    branches = [
                        { angle: angle + zigzag * Math.PI / 180, offset: 0 }
                    ];
                    break;
            }

            branches.forEach(branch => {
                drawBranch(endX, endY, newLength, branch.angle, depth - 1, maxDepth, newWidth);
            });
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);

            const startX = width / 2;
            const startY = height - 50;
            const initialLength = Math.min(width, height) / 6;
            const initialWidth = Math.max(1, initialLength / 15);

            const maxDepth = animating ? animationDepth : params.depth;

            drawBranch(startX, startY, initialLength, Math.PI / 2, maxDepth, params.depth, initialWidth);

            console.log(`Drew tree with depth ${maxDepth}, angle ${params.angle}Â°`);
        }

        // Event handlers
        document.getElementById('depth').addEventListener('input', (e) => {
            params.depth = parseInt(e.target.value);
            document.getElementById('depthValue').textContent = params.depth;
            if (!animating) draw();
        });

        document.getElementById('angle').addEventListener('input', (e) => {
            params.angle = parseInt(e.target.value);
            document.getElementById('angleValue').textContent = params.angle + 'Â°';
            if (!animating) draw();
        });

        document.getElementById('ratio').addEventListener('input', (e) => {
            params.ratio = parseFloat(e.target.value);
            document.getElementById('ratioValue').textContent = params.ratio.toFixed(2);
            if (!animating) draw();
        });

        document.getElementById('widthFactor').addEventListener('input', (e) => {
            params.widthFactor = parseFloat(e.target.value);
            document.getElementById('widthValue').textContent = params.widthFactor.toFixed(2);
            if (!animating) draw();
        });

        document.getElementById('style').addEventListener('change', (e) => {
            params.style = e.target.value;
            if (!animating) draw();
        });

        document.getElementById('colorScheme').addEventListener('change', (e) => {
            params.colorScheme = e.target.value;
            if (!animating) draw();
        });

        document.getElementById('animateBtn').addEventListener('click', () => {
            animating = !animating;
            if (animating) {
                document.getElementById('animateBtn').textContent = 'Stop Animation';
                animationDepth = 0;
                animate();
            } else {
                document.getElementById('animateBtn').textContent = 'Animate Growth';
                cancelAnimationFrame(animationFrame);
                draw();
            }
        });

        document.getElementById('randomBtn').addEventListener('click', () => {
            params.depth = Math.floor(Math.random() * 8) + 7;
            params.angle = Math.floor(Math.random() * 40) + 15;
            params.ratio = Math.random() * 0.3 + 0.6;
            params.widthFactor = Math.random() * 0.3 + 0.6;

            document.getElementById('depth').value = params.depth;
            document.getElementById('depthValue').textContent = params.depth;
            document.getElementById('angle').value = params.angle;
            document.getElementById('angleValue').textContent = params.angle + 'Â°';
            document.getElementById('ratio').value = params.ratio;
            document.getElementById('ratioValue').textContent = params.ratio.toFixed(2);
            document.getElementById('widthFactor').value = params.widthFactor;
            document.getElementById('widthValue').textContent = params.widthFactor.toFixed(2);

            if (!animating) draw();
        });

        function animate() {
            if (!animating) return;

            animationDepth += 0.1;
            if (animationDepth >= params.depth) {
                animationDepth = 0;
            }

            draw();

            animationFrame = requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => {
            resizeCanvas();
            draw();
        });

        // Initialize
        resizeCanvas();
        draw();

        console.log('ðŸŒ³ Recursive Tree Generator ready!');
    </script>
</body>
</html>
